#!/bin/bash

# Initialize an empty array to hold the filtered arguments
filtered_args=()

# Iterate over all provided arguments
for arg in "$@"; do
  # Exclude unsupported flags: -Wl,-znoexecheap, flags starting with -mtune=, and flags starting with -march=
  if [[ "$arg" != "-Wl,-znoexecheap" && "${arg:0:7}" != "-mtune=" && "${arg:0:7}" != "-march=" ]]; then
    filtered_args+=("$arg")
  fi
done

# Execute the compiler with the filtered arguments
exec zig "${filtered_args[@]}"